<!DOCTYPE html>

<head>
	<link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">

	<link rel="stylesheet" href="https://unpkg.com/leaflet@latest/dist/leaflet.css" />
    <link rel="stylesheet" href="../dist/Control.Geocoder.css" />

    <script src="https://unpkg.com/leaflet@latest/dist/leaflet-src.js"></script>
    <script src="../dist/Control.Geocoder.js"></script>
    <style type="text/css">
      body {
        margin: 0;
      }
      #map {
        position: absolute;
        width: 100%;
        height: 100%;
      }
    </style>

	<title>AcuWeather App</title>
</head>

<body>
	<div class="container">
		<div class="weather-card">
			<h1 style="color: green;">
				AcuWeather App
			</h1>
			
			<input type="text" id="city-input"
				placeholder="Enter city name">
			<button id="city-input-btn"
					onclick="weatherFn($('#city-input').val())">
					Get Weather
			</button>
			<div id="weather-info"
				class="animate__animated animate__fadeIn">
				<h3 id="city-name"></h3>
				<p id="date"></p>
				<br>
				<div id ="map" width="300" height="250"></div>

				<script type="text/javascript">
					var map = L.map('map').setView([0, 0], 2);
			  
					var geocoder = L.Control.Geocoder.nominatim();
					if (typeof URLSearchParams !== 'undefined' && location.search) {
					  // parse /?geocoder=nominatim from URL
					  var params = new URLSearchParams(location.search);
					  var geocoderString = params.get('geocoder');
					  if (geocoderString && L.Control.Geocoder[geocoderString]) {
						console.log('Using geocoder', geocoderString);
						geocoder = L.Control.Geocoder[geocoderString]();
					  } else if (geocoderString) {
						console.warn('Unsupported geocoder', geocoderString);
					  }
					}
			  
					var control = L.Control.geocoder({
					  query: 'Moon',
					  placeholder: 'Search here...',
					  geocoder: geocoder
					}).addTo(map);
					var marker;
			  
					setTimeout(function() {
					  control.setQuery('Earth');
					}, 12000);
			  
					L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
					  attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
					}).addTo(map);
			  
					map.on('click', function(e) {
					  geocoder.reverse(e.latlng, map.options.crs.scale(map.getZoom()), function(results) {
						var r = results[0];
						if (r) {
						  if (marker) {
							marker
							  .setLatLng(r.center)
							  .setPopupContent(r.html || r.name)
							  .openPopup();
						  } else {
							marker = L.marker(r.center)
							  .bindPopup(r.name)
							  .addTo(map)
							  .openPopup();
						  }
						}
					  });
					});
				  </script>
				<!--
				<iframe width="300" height="250" src="https://www.openstreetmap.org/export/embed.html?bbox=-75.44860839843751%2C40.34340411709394%2C-73.81439208984376%2C41.05035951931887&amp;layer=mapnik" style="border: 1px solid black"></iframe><br/><small>
				<img id="weather-icon" src="" alt="Weather Icon">
				-->
				<p id="temperature"></p>
				<p id="description"></p>
				<p id="wind-speed"></p>
			</div>
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://momentjs.com/downloads/moment.min.js"></script>
	<script src="scripts2.js"></script>

	
</body>

</html>